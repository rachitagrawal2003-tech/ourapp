<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}My Valentine{% endblock %}</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        valentine: {
                            50: '#fdf2f8',
                            100: '#fce7f3',
                            200: '#fbcfe8',
                            300: '#f9a8d4',
                            400: '#f472b6',
                            500: '#ec4899',
                            600: '#db2777',
                            700: '#be185d',
                            800: '#9d174d',
                            900: '#831843',
                        }
                    },
                    fontFamily: {
                        'dancing': ['"Dancing Script"', 'cursive'],
                        'poppins': ['Poppins', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style type="text/tailwindcss">
        @layer utilities {
            .glass {
                @apply bg-white/30 dark:bg-black/30 backdrop-blur-md border border-white/20 dark:border-white/10;
            }
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>

<body
    class="bg-valentine-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 font-poppins min-h-screen transition-colors duration-300 overflow-x-hidden">

    <!-- Floating Hearts Background (CSS only implementation for simplicity first impact) -->
    <div class="fixed inset-0 pointer-events-none z-0 overflow-hidden" id="bg-hearts">
        <!-- JS will populate particles here -->
    </div>

    <!-- Navigation/Header -->
    <nav class="fixed top-0 w-full z-50 glass shadow-sm">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="/"
                class="text-2xl font-dancing font-bold text-valentine-600 dark:text-valentine-400 hover:scale-110 transition-transform">
                <i class="fas fa-heart text-red-500 animate-pulse"></i> Valentine's Week
            </a>

            <button id="theme-toggle"
                class="p-2 rounded-full hover:bg-valentine-100 dark:hover:bg-gray-800 transition-colors focus:outline-none">
                <i class="fas fa-moon dark:hidden text-valentine-800"></i>
                <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main
        class="relative z-10 pt-20 pb-10 container mx-auto px-4 min-h-screen flex flex-col justify-center items-center">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="relative z-10 glass py-4 text-center text-sm text-valentine-800 dark:text-valentine-200">
        <p>Made with <i class="fas fa-heart text-red-500"></i> for You</p>
    </footer>

    <script>
        // Dark Mode Logic
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        // Default to Light (User request)
        // Only set dark if explicitly stored as 'dark'
        if (localStorage.theme === 'dark') {
            html.classList.add('dark');
        } else {
            html.classList.remove('dark');
        }

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            if (html.classList.contains('dark')) {
                localStorage.theme = 'dark';
            } else {
                localStorage.theme = 'light';
            }
        });

        // Background Hearts
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('absolute', 'text-valentine-300', 'dark:text-valentine-800', 'opacity-20', 'animate-float');
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 3 + 2 + 's';
            heart.style.fontSize = Math.random() * 20 + 10 + 'px';
            heart.innerHTML = '<i class="fas fa-heart"></i>';
            heart.style.top = '100vh';

            document.getElementById('bg-hearts').appendChild(heart);

            // Simple animation loop for rising
            let pos = 100;
            const interval = setInterval(() => {
                if (pos < -10) {
                    clearInterval(interval);
                    heart.remove();
                } else {
                    pos -= 0.5;
                    heart.style.top = pos + 'vh';
                }
            }, 50);
        }

        setInterval(createHeart, 500);
    </script>
    {% block extra_js %}{% endblock %}
</body>

</html>