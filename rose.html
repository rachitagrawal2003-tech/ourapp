<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rose Day - Feb 7</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        valentine: {
                            50: '#fdf2f8',
                            100: '#fce7f3',
                            200: '#fbcfe8',
                            300: '#f9a8d4',
                            400: '#f472b6',
                            500: '#ec4899',
                            600: '#db2777',
                            700: '#be185d',
                            800: '#9d174d',
                            900: '#831843',
                        }
                    },
                    fontFamily: {
                        'dancing': ['"Dancing Script"', 'cursive'],
                        'poppins': ['Poppins', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style type="text/tailwindcss">
        @layer utilities {
            .glass {
                @apply bg-white/30 dark:bg-black/30 backdrop-blur-md border border-white/20 dark:border-white/10;
            }
        }
    </style>
</head>

<body
    class="bg-valentine-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 font-poppins min-h-screen transition-colors duration-300 overflow-x-hidden">

    <!-- Background -->
    <div class="fixed inset-0 pointer-events-none z-0 overflow-hidden" id="bg-hearts"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass shadow-sm">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="index.html"
                class="text-2xl font-dancing font-bold text-valentine-600 dark:text-valentine-400 hover:scale-110 transition-transform">
                <i class="fas fa-heart text-red-500 animate-pulse"></i> Valentine's Week
            </a>

            <button id="theme-toggle"
                class="p-2 rounded-full hover:bg-valentine-100 dark:hover:bg-gray-800 transition-colors focus:outline-none">
                <i class="fas fa-moon dark:hidden text-valentine-800"></i>
                <i class="fas fa-sun hidden dark:block text-yellow-400"></i>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main
        class="relative z-10 pt-20 pb-10 container mx-auto px-4 min-h-screen flex flex-col justify-center items-center">

        <div class="text-center relative z-10 select-none cursor-pointer w-full h-full min-h-[80vh] flex flex-col items-center justify-center"
            id="click-area">
            <h1 class="text-6xl md:text-8xl font-dancing text-red-600 mb-8 animate-float drop-shadow-lg">
                Grow a Bouquet
            </h1>
            <p
                class="text-xl text-gray-700 dark:text-gray-300 mb-8 bg-white/50 dark:bg-black/50 p-4 rounded-xl backdrop-blur-sm">
                Tap anywhere to plant a rose and discover a reason why I love you.
            </p>

            <!-- Container for Roses -->
            <div id="garden" class="fixed inset-0 pointer-events-none overflow-hidden"></div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="relative z-10 glass py-4 text-center text-sm text-valentine-800 dark:text-valentine-200">
        <p>Made with <i class="fas fa-heart text-red-500"></i> for You</p>
    </footer>

    <script>
        // Dark Mode Logic
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        if (localStorage.theme === 'dark') {
            html.classList.add('dark');
        } else {
            html.classList.remove('dark');
        }

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            if (html.classList.contains('dark')) {
                localStorage.theme = 'dark';
            } else {
                localStorage.theme = 'light';
            }
        });

        // Background Hearts
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('absolute', 'text-valentine-300', 'dark:text-valentine-800', 'opacity-20', 'animate-float');
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 3 + 2 + 's';
            heart.style.fontSize = Math.random() * 20 + 10 + 'px';
            heart.innerHTML = '<i class="fas fa-heart"></i>';
            heart.style.top = '100vh';
            document.getElementById('bg-hearts').appendChild(heart);
            let pos = 100;
            const interval = setInterval(() => {
                if (pos < -10) {
                    clearInterval(interval);
                    heart.remove();
                } else {
                    pos -= 0.5;
                    heart.style.top = pos + 'vh';
                }
            }, 50);
        }
        setInterval(createHeart, 500);

        // Rose Day Logic
        const garden = document.getElementById('garden');
        const clickArea = document.getElementById('click-area');
        const colors = ['text-red-500', 'text-pink-500', 'text-rose-500', 'text-red-600'];

        let clickCount = 0;
        let lastPlantTime = 0; // Timestamp based debounce

        // Embedded Reasons from reasons.txt
        const reasonsList = [
            "you get me waffles hehehe",
            "you have the prettiest eyes every",
            "you always look out for me",
            "you teach me about a lot of things",
            "you care so much about me",
            "you cook for me",
            "you get me food when I am in delhi",
            "you send me cute cute selfies",
            "you have the most beautiful hair",
            "you love me even when i am bald lmao",
            "you compliment me regularly (mean kam hua kro please)",
            "you support me a lot",
            "you notice things",
            "you are always grateful for things i do for you",
            "you care about my family too",
            "yours hands are so soft",
            "youre so freaky too love it lmfao",
            "tumhe cuddle karna is so fun",
            "you proposed me in the best way heheheheh",
            "you are kuchiepuchieee muah muahhh"
        ];
        const MAX_ROSES = 20;

        function plantRose(x, y) {
            const now = Date.now();
            // 500ms strict cooldown to prevent double taps
            if (now - lastPlantTime < 500 || clickCount >= MAX_ROSES) return;

            lastPlantTime = now;
            clickCount++;

            // Create Rose
            const rose = document.createElement('div');
            const color = colors[Math.floor(Math.random() * colors.length)];
            rose.className = `absolute text-5xl md:text-7xl ${color} rose-element transform scale-0 transition-transform duration-500 ease-out drop-shadow-xl z-20`;
            rose.style.left = `${x}px`;
            rose.style.top = `${y}px`;
            rose.innerHTML = '<i class="fas fa-rose"></i>';
            rose.dataset.id = clickCount;

            // Random rotation
            const rotation = Math.random() * 60 - 30;
            rose.style.transform = `translate(-50%, -50%) rotate(${rotation}deg) scale(0)`;

            garden.appendChild(rose);

            requestAnimationFrame(() => {
                rose.style.transform = `translate(-50%, -50%) rotate(${rotation}deg) scale(1)`;
            });

            // Create Floating Text
            const reasonText = reasonsList[clickCount - 1] || "I love you so much!";
            const text = document.createElement('div');
            text.className = 'absolute text-lg md:text-xl font-dancing text-valentine-900 dark:text-valentine-100 font-bold pointer-events-none animate-float opacity-0 transition-opacity duration-500 z-30 bg-white/70 dark:bg-black/70 px-4 py-2 rounded-full whitespace-nowrap';
            text.style.left = `${x}px`;
            text.style.top = `${y - 60}px`;
            text.style.transform = 'translateX(-50%)';
            text.innerText = `${clickCount}. ${reasonText}`;
            text.style.textShadow = '0 2px 4px rgba(0,0,0,0.1)';

            garden.appendChild(text);

            requestAnimationFrame(() => {
                text.classList.remove('opacity-0');
            });

            // Cleanup text after a while (Roses stay!)
            setTimeout(() => {
                text.classList.add('opacity-0');
                setTimeout(() => text.remove(), 500);
            }, 4000);
        }

        // Handle both Click and Touch, but debounce handles the duplicate
        document.addEventListener('click', (e) => {
            if (e.target.closest('button') || e.target.closest('a') || e.target.closest('nav')) return;
            plantRose(e.clientX, e.clientY);
        });

        document.addEventListener('touchstart', (e) => {
            if (e.target.closest('button') || e.target.closest('a') || e.target.closest('nav')) return;
            // Removed preventDefault to allow scrolling if needed, rely on timestamp debounce
            const touch = e.touches[0];
            plantRose(touch.clientX, touch.clientY);
        }, { passive: true });
    </script>
</body>

</html>